<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Login | ReConstruye</title>

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Estilos -->
  <style>
    body {
      min-height: 100vh;
      display: flex;
      align-items: center;
      background: #f1f3f5;
    }

    .login-card {
      max-width: 420px;
      margin: auto;
      padding: 2rem;
      border-radius: 10px;
      box-shadow: 0 10px 25px rgba(0,0,0,.1);
      background: white;
    }
  </style>
</head>

<body>

<div class="login-card">
  <h2 class="text-center fw-bold mb-4">Iniciar SesiÃ³n</h2>

  <form id="loginForm">
    <input id="email" type="email" class="form-control mb-3" placeholder="Email" required>

    <input id="password" type="password" class="form-control mb-3" placeholder="ContraseÃ±a" required>

    <div id="error" class="text-danger mb-3 d-none">
      Credenciales incorrectas
    </div>

    <button class="btn btn-primary w-100 mb-3">
      Entrar
    </button>
  </form>

  <p class="text-center mb-0">
    Â¿No tienes cuenta?
    <a href="register.html">RegÃ­strate</a>
  </p>
</div>

<script>
  const form = document.getElementById("loginForm");
  const error = document.getElementById("error");

  // ðŸ” ADMIN GLOBAL (funciona en cualquier PC)
  const ADMIN_EMAIL = "admin@reconstruye.com";
  const ADMIN_PASSWORD = "admin123";

  form.addEventListener("submit", function (e) {
    e.preventDefault();
    error.classList.add("d-none");

    const email = document.getElementById("email").value.trim();
    const password = document.getElementById("password").value.trim();

    /* ======================
       LOGIN ADMIN
    ====================== */
    if (email === ADMIN_EMAIL && password === ADMIN_PASSWORD) {
      localStorage.setItem(
        "loggedUser",
        JSON.stringify({
          id: 0,
          name: "Administrador",
          email: ADMIN_EMAIL,
          role: "admin"
        })
      );

      window.location.href = "admin.html";
      return;
    }

    /* ======================
       LOGIN USUARIO NORMAL
    ====================== */
    const users = JSON.parse(localStorage.getItem("users")) || [];

    const user = users.find(
      u => u.email === email && u.password === password
    );

    if (!user) {
      error.classList.remove("d-none");
      return;
    }

    const loggedUser = {
      id: user.id,
      name: user.name,
      email: user.email,
      role: user.role || "user"
    };

    localStorage.setItem("loggedUser", JSON.stringify(loggedUser));

    window.location.href = "dashboard.html";
  });
</script>

</body>
</html>
